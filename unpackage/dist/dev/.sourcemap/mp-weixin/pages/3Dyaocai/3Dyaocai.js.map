{"version":3,"file":"3Dyaocai.js","sources":["pages/3Dyaocai/3Dyaocai.vue","../../Hbuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvM0R5YW9jYWkvM0R5YW9jYWkudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 状态栏（与第一个示例相同的方式） -->\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\n    <!-- 导航栏 -->\n    <view class=\"nav-bar\">\n      <view class=\"back-btn\" @tap=\"goBack\" hover-class=\"nav-btn-hover\">＜</view>\n      <view class=\"nav-title\">常见中草药</view>\n      <view class=\"nav-right\" hover-class=\"nav-btn-hover\">\n        <u-icon name=\"more-dot\" color=\"#ffffff\" size=\"22\"></u-icon>\n      </view>\n    </view>\n\n    <!-- 搜索框 -->\n    <view class=\"search-container\">\n      <view class=\"search-box\">\n        <image src=\"/static/搜索.png\" class=\"search-icon\"></image>\n        <input \n          type=\"text\" \n          class=\"search-input\" \n          placeholder=\"搜索中草药名称...\" \n          placeholder-style=\"color: #999;\"\n          @focus=\"searchFocus\"\n          @blur=\"searchBlur\"\n        >\n      </view>\n    </view>\n\n    <!-- 选项卡（功效/药性） -->\n    <view class=\"tab-container\">\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 0 }\" \n        @click=\"switchTab(0)\"\n        hover-class=\"tab-item-hover\"\n      >\n        <text>功效</text>\n        <view class=\"tab-line\" v-if=\"currentTab === 0\"></view>\n      </view>\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 1 }\" \n        @click=\"switchTab(1)\"\n        hover-class=\"tab-item-hover\"\n      >\n        <text>药性</text>\n        <view class=\"tab-line\" v-if=\"currentTab === 1\"></view>\n      </view>\n    </view>\n\n    <!-- 筛选栏 -->\n    <view class=\"filter-container\">\n      <view class=\"filter-bar\">\n        <view \n          class=\"filter-tag\" \n          :class=\"{ active: activeFilter === index }\" \n          v-for=\"(filter, index) in currentFilters\" \n          :key=\"index\"\n          @click=\"changeFilter(index)\"\n          hover-class=\"filter-tag-hover\"\n        >\n          {{ filter }}\n        </view>\n        <view class=\"filter-btn\" @click=\"showFilter\" hover-class=\"filter-btn-hover\">\n          <image src=\"/static/筛选2.png\" class=\"filter-icon\"></image>\n          <text>筛选</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 内容区（核心展示区域） -->\n    <scroll-view \n      class=\"content-scroll\" \n      scroll-y\n      :style=\"{ height: scrollViewHeight + 'px' }\"\n    >\n      <view class=\"category-content\">\n        <!-- 分类标题 -->\n        <view class=\"category-header\">\n          <text class=\"category-title\">{{ currentCategory.title }}</text>\n        </view>\n        \n        <!-- 功效分类专属子标题 -->\n        <view \n          class=\"category-subtitle\" \n          v-if=\"currentTab === 0 && activeFilter === 0\"\n        >\n          <text class=\"subtitle-text\">发散风寒药</text>\n        </view>\n        \n        <!-- 药材列表 -->\n        <view class=\"herb-list\">\n          <view \n            class=\"herb-item\" \n            v-for=\"(herb, index) in currentCategory.herbs\" \n            :key=\"herb.name\"\n            @click=\"navToHerbDetail(herb)\"\n            hover-class=\"herb-item-hover\"\n          >\n            <image \n              :src=\"herb.img\" \n              class=\"herb-img\" \n              mode=\"aspectFit\"\n              @error=\"handleImageError(index)\"\n            ></image>\n            <view class=\"herb-info\">\n              <view class=\"herb-name\">{{ herb.name }}</view>\n              <view class=\"herb-desc\">{{ herb.desc }}</view>\n            </view>\n            <u-icon name=\"arrow-right\" color=\"#999\" size=\"20\"></u-icon>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      statusBarHeight: 20, // 默认值，将在onLoad中更新\n      scrollViewHeight: 500, // 动态计算后更新\n      currentTab: 0, // 0:功效 1:药性\n      activeFilter: 0, // 当前选中的筛选标签索引\n      \n      // 功效分类数据\n      effCategories: [\n        {\n          title: \"解表药\",\n          filters: [\"解表药\", \"清热药\", \"泻下药\", \"祛风湿药\"],\n          herbs: [\n            { name: '紫苏', img: '/static/紫苏.jpg', desc: '解表散寒，行气和胃。辛，温。归肺、脾经。' },\n            { name: '麻黄', img: '/static/麻黄.jpg', desc: '发汗解表，宣肺平喘，利水消肿。辛、微苦，温。归肺、膀胱经。' },\n            { name: '桂枝', img: '/static/桂枝.jpg', desc: '发汗解肌，温通经脉，助阳化气。辛、甘，温。归心、肺、膀胱经。' },\n            { name: '生姜', img: '/static/生姜.jpg', desc: '解表散寒，温中止呕，温肺止咳。辛，温。归肺、脾、胃经。' },\n            { name: '香薷', img: '/static/香薷.jpg', desc: '发汗解表，化湿和中，利水消肿。辛，微温。归肺、脾、胃经。' }\n          ]\n        },\n        // 其他功效分类数据...\n      ],\n      \n      // 药性分类数据\n      propCategories: [\n        {\n          title: \"平\",\n          filters: [\"平\", \"温\", \"凉\", \"寒\"],\n          herbs: [\n            { name: '银杏叶', img: '/static/银杏叶.jpg', desc: '益心敛肺，活血化瘀，通脉舒络，止泻。甘苦、涩，平。归心、肺经。' },\n            { name: '仙鹤草', img: '/static/仙鹤草.jpg', desc: '收敛止血，截疟，止痢，解毒，补虚。苦、涩，平。归心、肝经。' },\n            { name: '鸡内金', img: '/static/鸡内金.jpg', desc: '健胃消食，涩精止遗，通淋化石。甘，平。归脾、胃、小肠、膀胱经。' },\n            { name: '莱菔子', img: '/static/菜菔子.jpg', desc: '消食除胀，降气化痰。辛、甘，平。归脾、胃、肺经。' },\n            { name: '麦芽', img: '/static/麦芽.jpg', desc: '行气消食，健脾开胃，回乳消胀。甘，平。归脾、胃经。' }\n          ]\n        },\n        // 其他药性分类数据...\n      ]\n    };\n  },\n  computed: {\n    // 当前筛选标签列表\n    currentFilters() {\n      return this.currentTab === 0 \n        ? this.effCategories[0].filters \n        : this.propCategories[0].filters;\n    },\n    // 当前分类数据\n    currentCategory() {\n      return this.currentTab === 0 \n        ? this.effCategories[this.activeFilter] \n        : this.propCategories[this.activeFilter];\n    }\n  },\n  onLoad() {\n    this.calcScrollHeight();\n    this.initStatusBar();\n  },\n  methods: {\n    // 初始化状态栏高度（与第一个示例相同的方式）\n    initStatusBar() {\n      uni.getSystemInfo({\n        success: (res) => {\n          this.statusBarHeight = res.statusBarHeight || 20;\n        },\n        fail: () => {\n          this.statusBarHeight = 20; // 默认值\n        }\n      });\n    },\n    \n    // 计算滚动区域高度\n    calcScrollHeight() {\n      const query = uni.createSelectorQuery().in(this);\n      query.select('.container').boundingClientRect(data => {\n        const windowHeight = uni.getSystemInfoSync().windowHeight;\n        const top = data ? data.top : 0;\n        this.scrollViewHeight = windowHeight - top - 44 - 36 - 48 - 32; // 减去各组件高度\n      }).exec();\n    },\n    \n    // 切换选项卡\n    switchTab(index) {\n      if (this.currentTab !== index) {\n        this.currentTab = index;\n        this.activeFilter = 0;\n        this.$nextTick(() => {\n          this.calcScrollHeight();\n        });\n      }\n    },\n    \n    // 切换筛选标签\n    changeFilter(index) {\n      this.activeFilter = index;\n    },\n    \n    // 导航返回\n    goBack() {\n      uni.navigateBack();\n    },\n    \n    // 搜索框聚焦/失焦\n    searchFocus() {\n      console.log('搜索框聚焦');\n    },\n    searchBlur() {\n      console.log('搜索框失焦');\n    },\n    \n    // 显示筛选弹窗\n    showFilter() {\n      uni.showToast({\n        title: '筛选功能开发中',\n        icon: 'none'\n      });\n    },\n    \n    // 跳转药材详情\n    navToHerbDetail(herb) {\n      uni.navigateTo({\n        url: `/pages/herb/detail?name=${encodeURIComponent(herb.name)}`\n      });\n    },\n    \n    // 图片加载失败处理\n    handleImageError(index) {\n      const fallbackImg = '/static/herbs/default.png';\n      if (this.currentTab === 0) {\n        this.effCategories[this.activeFilter].herbs[index].img = fallbackImg;\n      } else {\n        this.propCategories[this.activeFilter].herbs[index].img = fallbackImg;\n      }\n    }\n  }\n};\n</script>\n\n<style>\n/* 基础样式 */\npage {\n  background-color: #f8f8f8;\n  height: 100%;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  position: relative;\n}\n\n/* 状态栏（与第一个示例相同的样式） */\n.status-bar {\n  width: 100%;\n}\n\n/* 导航栏 */\n.nav-bar {\n  height: 44px;\n  background-color: #2d8659;\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n  position: relative;\n  z-index: 10;\n}\n\n.back-btn, .nav-right {\n  width: 40px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nav-btn-hover {\n  opacity: 0.8;\n}\n\n.nav-title {\n  flex: 1;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  font-weight: 500;\n}\n\n/* 搜索框 */\n.search-container {\n  padding: 10px 15px;\n  background-color: #f8f8f8;\n  position: relative;\n  z-index: 5;\n}\n\n.search-box {\n  height: 36px;\n  background-color: #e7e7e7;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n}\n\n.search-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 10px;\n}\n\n.search-input {\n  flex: 1;\n  height: 100%;\n  font-size: 14px;\n  background-color: transparent;\n  border: none;\n  outline: none;\n}\n\n/* 选项卡 */\n.tab-container {\n  display: flex;\n  background-color: #fff;\n  padding: 0;\n  margin-bottom: 12px;\n  position: relative;\n  z-index: 5;\n}\n\n.tab-item {\n  flex: 1;\n  text-align: center;\n  padding: 12px 0;\n  font-size: 16px;\n  color: #666;\n  position: relative;\n}\n\n.tab-item.active {\n  color: #2d8659;\n  font-weight: 500;\n}\n\n.tab-line {\n  width: 30px;\n  height: 3px;\n  background-color: #2d8659;\n  border-radius: 2px;\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.tab-item-hover {\n  background-color: rgba(45, 134, 89, 0.05);\n}\n\n/* 筛选栏 */\n.filter-container {\n  padding: 0 15px 12px;\n  background-color: #f8f8f8;\n  position: relative;\n  z-index: 5;\n}\n\n.filter-bar {\n  display: flex;\n  align-items: center;\n  height: 32px;\n  gap: 8px;\n  overflow-x: auto;\n  white-space: nowrap;\n  -webkit-overflow-scrolling: touch;\n}\n\n.filter-tag {\n  padding: 6px 12px;\n  background-color: #f0f0f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #666;\n  height: 32px;\n  box-sizing: border-box;\n  flex-shrink: 0;\n}\n\n.filter-tag.active {\n  background-color: #2d8659;\n  color: #fff;\n}\n\n.filter-tag-hover:not(.active) {\n  background-color: #e0e0e0;\n}\n\n.filter-btn {\n  padding: 6px 12px;\n  background-color: #f0f0f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #666;\n  height: 32px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  flex-shrink: 0;\n}\n\n.filter-btn-hover {\n  background-color: #e0e0e0;\n}\n\n.filter-icon {\n  width: 14px;\n  height: 14px;\n  margin-right: 5px;\n}\n\n/* 内容区（核心滚动区域） */\n.content-scroll {\n  flex: 1;\n  background-color: #ffffff;\n  position: relative;\n  z-index: 1;\n}\n\n.category-content {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n/* 分类标题 */\n.category-header {\n  padding: 10px 15px;\n  background-color: #FFF9E6;\n}\n\n.category-title {\n  font-size: 15px;\n  color: #E6A23C;\n  font-weight: normal;\n}\n\n/* 子分类标题 */\n.category-subtitle {\n  padding: 15px 15px 8px;\n}\n\n.subtitle-text {\n  font-size: 15px;\n  color: #333;\n  font-weight: bold;\n}\n\n/* 药材列表 */\n.herb-list {\n  padding: 0 15px;\n}\n\n.herb-item {\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.herb-item:last-child {\n  border-bottom: none;\n}\n\n.herb-img {\n  width: 60px;\n  height: 60px;\n  border-radius: 6px;\n  margin-right: 15px;\n  background-color: #f5f5f5;\n}\n\n.herb-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.herb-name {\n  font-size: 16px;\n  color: #333;\n  margin-bottom: 5px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.herb-desc {\n  font-size: 13px;\n  color: #666;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.herb-item-hover {\n  background-color: #f9f9f9;\n}\n\n/* 安全区域适配 */\n.safe-area-bottom {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n/* 媒体查询适配小屏幕 */\n@media (max-width: 320px) {\n  .herb-img {\n    width: 50px;\n    height: 50px;\n  }\n  .herb-name {\n    font-size: 15px;\n  }\n}\n</style>","import MiniProgramPage from 'D:/uniapp-1/shennong/pages/3Dyaocai/3Dyaocai.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}