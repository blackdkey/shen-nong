{"version":3,"names":["_sfc_main","data","statusBarHeight","scrollViewHeight","currentTab","activeFilter","effCategories","title","filters","herbs","name","img","desc","propCategories","computed","currentFilters","currentCategory","onLoad","calcScrollHeight","initStatusBar","methods","_this","common_vendor","index","getSystemInfo","success","res","fail","_this2","query","createSelectorQuery","in","select","boundingClientRect","windowHeight","getSystemInfoSync","top","exec","switchTab","_this3","$nextTick","changeFilter","goBack","navigateBack","searchFocus","__f__","searchBlur","showFilter","showToast","icon","navToHerbDetail","herb","navigateTo","url","concat","encodeURIComponent","handleImageError","fallbackImg","wx","createPage","MiniProgramPage"],"sources":["3Dyaocai.vue","cGFnZXMvM0R5YW9jYWkvM0R5YW9jYWkudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 状态栏（与第一个示例相同的方式） -->\n    <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n\n    <!-- 导航栏 -->\n    <view class=\"nav-bar\">\n      <view class=\"back-btn\" @tap=\"goBack\" hover-class=\"nav-btn-hover\">＜</view>\n      <view class=\"nav-title\">常见中草药</view>\n      <view class=\"nav-right\" hover-class=\"nav-btn-hover\">\n        <u-icon name=\"more-dot\" color=\"#ffffff\" size=\"22\"></u-icon>\n      </view>\n    </view>\n\n    <!-- 搜索框 -->\n    <view class=\"search-container\">\n      <view class=\"search-box\">\n        <image src=\"/static/搜索.png\" class=\"search-icon\"></image>\n        <input \n          type=\"text\" \n          class=\"search-input\" \n          placeholder=\"搜索中草药名称...\" \n          placeholder-style=\"color: #999;\"\n          @focus=\"searchFocus\"\n          @blur=\"searchBlur\"\n        >\n      </view>\n    </view>\n\n    <!-- 选项卡（功效/药性） -->\n    <view class=\"tab-container\">\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 0 }\" \n        @click=\"switchTab(0)\"\n        hover-class=\"tab-item-hover\"\n      >\n        <text>功效</text>\n        <view class=\"tab-line\" v-if=\"currentTab === 0\"></view>\n      </view>\n      <view \n        class=\"tab-item\" \n        :class=\"{ active: currentTab === 1 }\" \n        @click=\"switchTab(1)\"\n        hover-class=\"tab-item-hover\"\n      >\n        <text>药性</text>\n        <view class=\"tab-line\" v-if=\"currentTab === 1\"></view>\n      </view>\n    </view>\n\n    <!-- 筛选栏 -->\n    <view class=\"filter-container\">\n      <view class=\"filter-bar\">\n        <view \n          class=\"filter-tag\" \n          :class=\"{ active: activeFilter === index }\" \n          v-for=\"(filter, index) in currentFilters\" \n          :key=\"index\"\n          @click=\"changeFilter(index)\"\n          hover-class=\"filter-tag-hover\"\n        >\n          {{ filter }}\n        </view>\n        <view class=\"filter-btn\" @click=\"showFilter\" hover-class=\"filter-btn-hover\">\n          <image src=\"/static/筛选2.png\" class=\"filter-icon\"></image>\n          <text>筛选</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 内容区（核心展示区域） -->\n    <scroll-view \n      class=\"content-scroll\" \n      scroll-y\n      :style=\"{ height: scrollViewHeight + 'px' }\"\n    >\n      <view class=\"category-content\">\n        <!-- 分类标题 -->\n        <view class=\"category-header\">\n          <text class=\"category-title\">{{ currentCategory.title }}</text>\n        </view>\n        \n        <!-- 功效分类专属子标题 -->\n        <view \n          class=\"category-subtitle\" \n          v-if=\"currentTab === 0 && activeFilter === 0\"\n        >\n          <text class=\"subtitle-text\">发散风寒药</text>\n        </view>\n        \n        <!-- 药材列表 -->\n        <view class=\"herb-list\">\n          <view \n            class=\"herb-item\" \n            v-for=\"(herb, index) in currentCategory.herbs\" \n            :key=\"herb.name\"\n            @click=\"navToHerbDetail(herb)\"\n            hover-class=\"herb-item-hover\"\n          >\n            <image \n              :src=\"herb.img\" \n              class=\"herb-img\" \n              mode=\"aspectFit\"\n              @error=\"handleImageError(index)\"\n            ></image>\n            <view class=\"herb-info\">\n              <view class=\"herb-name\">{{ herb.name }}</view>\n              <view class=\"herb-desc\">{{ herb.desc }}</view>\n            </view>\n            <u-icon name=\"arrow-right\" color=\"#999\" size=\"20\"></u-icon>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      statusBarHeight: 20, // 默认值，将在onLoad中更新\n      scrollViewHeight: 500, // 动态计算后更新\n      currentTab: 0, // 0:功效 1:药性\n      activeFilter: 0, // 当前选中的筛选标签索引\n      \n      // 功效分类数据\n      effCategories: [\n        {\n          title: \"解表药\",\n          filters: [\"解表药\", \"清热药\", \"泻下药\", \"祛风湿药\"],\n          herbs: [\n            { name: '紫苏', img: '/static/紫苏.jpg', desc: '解表散寒，行气和胃。辛，温。归肺、脾经。' },\n            { name: '麻黄', img: '/static/麻黄.jpg', desc: '发汗解表，宣肺平喘，利水消肿。辛、微苦，温。归肺、膀胱经。' },\n            { name: '桂枝', img: '/static/桂枝.jpg', desc: '发汗解肌，温通经脉，助阳化气。辛、甘，温。归心、肺、膀胱经。' },\n            { name: '生姜', img: '/static/生姜.jpg', desc: '解表散寒，温中止呕，温肺止咳。辛，温。归肺、脾、胃经。' },\n            { name: '香薷', img: '/static/香薷.jpg', desc: '发汗解表，化湿和中，利水消肿。辛，微温。归肺、脾、胃经。' }\n          ]\n        },\n        // 其他功效分类数据...\n      ],\n      \n      // 药性分类数据\n      propCategories: [\n        {\n          title: \"平\",\n          filters: [\"平\", \"温\", \"凉\", \"寒\"],\n          herbs: [\n            { name: '银杏叶', img: '/static/银杏叶.jpg', desc: '益心敛肺，活血化瘀，通脉舒络，止泻。甘苦、涩，平。归心、肺经。' },\n            { name: '仙鹤草', img: '/static/仙鹤草.jpg', desc: '收敛止血，截疟，止痢，解毒，补虚。苦、涩，平。归心、肝经。' },\n            { name: '鸡内金', img: '/static/鸡内金.jpg', desc: '健胃消食，涩精止遗，通淋化石。甘，平。归脾、胃、小肠、膀胱经。' },\n            { name: '莱菔子', img: '/static/菜菔子.jpg', desc: '消食除胀，降气化痰。辛、甘，平。归脾、胃、肺经。' },\n            { name: '麦芽', img: '/static/麦芽.jpg', desc: '行气消食，健脾开胃，回乳消胀。甘，平。归脾、胃经。' }\n          ]\n        },\n        // 其他药性分类数据...\n      ]\n    };\n  },\n  computed: {\n    // 当前筛选标签列表\n    currentFilters() {\n      return this.currentTab === 0 \n        ? this.effCategories[0].filters \n        : this.propCategories[0].filters;\n    },\n    // 当前分类数据\n    currentCategory() {\n      return this.currentTab === 0 \n        ? this.effCategories[this.activeFilter] \n        : this.propCategories[this.activeFilter];\n    }\n  },\n  onLoad() {\n    this.calcScrollHeight();\n    this.initStatusBar();\n  },\n  methods: {\n    // 初始化状态栏高度（与第一个示例相同的方式）\n    initStatusBar() {\n      uni.getSystemInfo({\n        success: (res) => {\n          this.statusBarHeight = res.statusBarHeight || 20;\n        },\n        fail: () => {\n          this.statusBarHeight = 20; // 默认值\n        }\n      });\n    },\n    \n    // 计算滚动区域高度\n    calcScrollHeight() {\n      const query = uni.createSelectorQuery().in(this);\n      query.select('.container').boundingClientRect(data => {\n        const windowHeight = uni.getSystemInfoSync().windowHeight;\n        const top = data ? data.top : 0;\n        this.scrollViewHeight = windowHeight - top - 44 - 36 - 48 - 32; // 减去各组件高度\n      }).exec();\n    },\n    \n    // 切换选项卡\n    switchTab(index) {\n      if (this.currentTab !== index) {\n        this.currentTab = index;\n        this.activeFilter = 0;\n        this.$nextTick(() => {\n          this.calcScrollHeight();\n        });\n      }\n    },\n    \n    // 切换筛选标签\n    changeFilter(index) {\n      this.activeFilter = index;\n    },\n    \n    // 导航返回\n    goBack() {\n      uni.navigateBack();\n    },\n    \n    // 搜索框聚焦/失焦\n    searchFocus() {\n      console.log('搜索框聚焦');\n    },\n    searchBlur() {\n      console.log('搜索框失焦');\n    },\n    \n    // 显示筛选弹窗\n    showFilter() {\n      uni.showToast({\n        title: '筛选功能开发中',\n        icon: 'none'\n      });\n    },\n    \n    // 跳转药材详情\n    navToHerbDetail(herb) {\n      uni.navigateTo({\n        url: `/pages/herb/detail?name=${encodeURIComponent(herb.name)}`\n      });\n    },\n    \n    // 图片加载失败处理\n    handleImageError(index) {\n      const fallbackImg = '/static/herbs/default.png';\n      if (this.currentTab === 0) {\n        this.effCategories[this.activeFilter].herbs[index].img = fallbackImg;\n      } else {\n        this.propCategories[this.activeFilter].herbs[index].img = fallbackImg;\n      }\n    }\n  }\n};\n</script>\n\n<style>\n/* 基础样式 */\npage {\n  background-color: #f8f8f8;\n  height: 100%;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  position: relative;\n}\n\n/* 状态栏（与第一个示例相同的样式） */\n.status-bar {\n  width: 100%;\n}\n\n/* 导航栏 */\n.nav-bar {\n  height: 44px;\n  background-color: #2d8659;\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n  position: relative;\n  z-index: 10;\n}\n\n.back-btn, .nav-right {\n  width: 40px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nav-btn-hover {\n  opacity: 0.8;\n}\n\n.nav-title {\n  flex: 1;\n  text-align: center;\n  color: #fff;\n  font-size: 18px;\n  font-weight: 500;\n}\n\n/* 搜索框 */\n.search-container {\n  padding: 10px 15px;\n  background-color: #f8f8f8;\n  position: relative;\n  z-index: 5;\n}\n\n.search-box {\n  height: 36px;\n  background-color: #e7e7e7;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n}\n\n.search-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 10px;\n}\n\n.search-input {\n  flex: 1;\n  height: 100%;\n  font-size: 14px;\n  background-color: transparent;\n  border: none;\n  outline: none;\n}\n\n/* 选项卡 */\n.tab-container {\n  display: flex;\n  background-color: #fff;\n  padding: 0;\n  margin-bottom: 12px;\n  position: relative;\n  z-index: 5;\n}\n\n.tab-item {\n  flex: 1;\n  text-align: center;\n  padding: 12px 0;\n  font-size: 16px;\n  color: #666;\n  position: relative;\n}\n\n.tab-item.active {\n  color: #2d8659;\n  font-weight: 500;\n}\n\n.tab-line {\n  width: 30px;\n  height: 3px;\n  background-color: #2d8659;\n  border-radius: 2px;\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.tab-item-hover {\n  background-color: rgba(45, 134, 89, 0.05);\n}\n\n/* 筛选栏 */\n.filter-container {\n  padding: 0 15px 12px;\n  background-color: #f8f8f8;\n  position: relative;\n  z-index: 5;\n}\n\n.filter-bar {\n  display: flex;\n  align-items: center;\n  height: 32px;\n  gap: 8px;\n  overflow-x: auto;\n  white-space: nowrap;\n  -webkit-overflow-scrolling: touch;\n}\n\n.filter-tag {\n  padding: 6px 12px;\n  background-color: #f0f0f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #666;\n  height: 32px;\n  box-sizing: border-box;\n  flex-shrink: 0;\n}\n\n.filter-tag.active {\n  background-color: #2d8659;\n  color: #fff;\n}\n\n.filter-tag-hover:not(.active) {\n  background-color: #e0e0e0;\n}\n\n.filter-btn {\n  padding: 6px 12px;\n  background-color: #f0f0f0;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #666;\n  height: 32px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n  flex-shrink: 0;\n}\n\n.filter-btn-hover {\n  background-color: #e0e0e0;\n}\n\n.filter-icon {\n  width: 14px;\n  height: 14px;\n  margin-right: 5px;\n}\n\n/* 内容区（核心滚动区域） */\n.content-scroll {\n  flex: 1;\n  background-color: #ffffff;\n  position: relative;\n  z-index: 1;\n}\n\n.category-content {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n/* 分类标题 */\n.category-header {\n  padding: 10px 15px;\n  background-color: #FFF9E6;\n}\n\n.category-title {\n  font-size: 15px;\n  color: #E6A23C;\n  font-weight: normal;\n}\n\n/* 子分类标题 */\n.category-subtitle {\n  padding: 15px 15px 8px;\n}\n\n.subtitle-text {\n  font-size: 15px;\n  color: #333;\n  font-weight: bold;\n}\n\n/* 药材列表 */\n.herb-list {\n  padding: 0 15px;\n}\n\n.herb-item {\n  display: flex;\n  align-items: center;\n  padding: 15px 0;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.herb-item:last-child {\n  border-bottom: none;\n}\n\n.herb-img {\n  width: 60px;\n  height: 60px;\n  border-radius: 6px;\n  margin-right: 15px;\n  background-color: #f5f5f5;\n}\n\n.herb-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.herb-name {\n  font-size: 16px;\n  color: #333;\n  margin-bottom: 5px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.herb-desc {\n  font-size: 13px;\n  color: #666;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.herb-item-hover {\n  background-color: #f9f9f9;\n}\n\n/* 安全区域适配 */\n.safe-area-bottom {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n\n/* 媒体查询适配小屏幕 */\n@media (max-width: 320px) {\n  .herb-img {\n    width: 50px;\n    height: 50px;\n  }\n  .herb-name {\n    font-size: 15px;\n  }\n}\n</style>","import MiniProgramPage from 'D:/uniapp-1/shennong/pages/3Dyaocai/3Dyaocai.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}